import{e as t}from"./p-2915ed18.js";import{Storage as e}from"@aws-amplify/storage";const r=new Set(["apng","bmp","gif","ico","cur","jpg","jpeg","jfif","pjpeg","pjp","png","svg","tif","tiff","webp"]),o=(t,e)=>{const{name:r,size:o,type:n}=t;let a=encodeURI(r);return e&&(a="string"==typeof e?e:"function"==typeof e?e({name:r,size:o,type:n}):encodeURI(JSON.stringify(e)),a||(a="empty_key")),a.replace(/\s/g,"_")},n=async(r,o,n,a,i)=>{if(!e||"function"!=typeof e.get)throw new Error(t);try{const t=await e.get(r,{level:o,track:n,identityId:a});return i.debug("Storage image get",t),t}catch(c){throw new Error(c)}},a=async(r,o,n,a,i)=>{if(!e||"function"!=typeof e.get)throw new Error(t);try{const t=await e.get(r,{download:!0,level:o,track:n,identityId:a});return i.debug(t),await(c=t.Body,new Promise((t,e)=>{const r=new FileReader;r.onload=()=>{t(r.result)},r.onerror=()=>{e("Failed to read file!"),r.abort()},r.readAsText(c)}))}catch(p){throw new Error(p)}var c},i=async(r,o,n,a,i,c)=>{if(!e||"function"!=typeof e.put)throw new Error(t);try{const t=await e.put(r,o,{contentType:i,level:n,track:a});c.debug("Upload data",t)}catch(p){throw new Error(p)}};export{a,o as c,n as g,r as i,i as p}